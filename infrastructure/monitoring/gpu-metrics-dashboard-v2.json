{
  "start": "-PT3H",
  "periodOverride": "inherit",
  "widgets": [
    {
      "type": "metric",
      "x": 0,
      "y": 0,
      "width": 24,
      "height": 1,
      "properties": {
        "markdown": "# ðŸŽ® GPU Metrics Dashboard\n\n**Gold Tier** (g5.xlarge, 1 A10G 24GB) | **Silver Tier** (g5.2xlarge, 1 A10G 24GB) | **Namespace**: AI-Gaming/GPU | **Spot**: 80%"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 1,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ { "expression": "SEARCH('{AI-Gaming/GPU,Tier} Tier=\"gold\" MetricName=\"GPUUtilization\"', 'Average', 60)", "label": "Gold Tier AVG", "id": "e1" } ],
          [ { "expression": "SEARCH('{AI-Gaming/GPU,Tier} Tier=\"silver\" MetricName=\"GPUUtilization\"', 'Average', 60)", "label": "Silver Tier AVG", "id": "e2" } ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "GPU Utilization by Tier (All Instances)",
        "period": 60,
        "yAxis": {
          "left": {
            "min": 0,
            "max": 100,
            "label": "Percent"
          }
        },
        "annotations": {
          "horizontal": [
            {
              "label": "Target (70%)",
              "value": 70,
              "color": "#2ca02c"
            },
            {
              "label": "High (95%)",
              "value": 95,
              "fill": "above",
              "color": "#d62728"
            }
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 1,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ { "expression": "SEARCH('{AI-Gaming/GPU,Tier} Tier=\"gold\" MetricName=\"GPUMemoryUtilization\"', 'Maximum', 60)", "label": "Gold Tier MAX", "id": "e1" } ],
          [ { "expression": "SEARCH('{AI-Gaming/GPU,Tier} Tier=\"silver\" MetricName=\"GPUMemoryUtilization\"', 'Maximum', 60)", "label": "Silver Tier MAX", "id": "e2" } ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "GPU Memory Utilization by Tier (MAX across instances)",
        "period": 60,
        "yAxis": {
          "left": {
            "min": 0,
            "max": 100,
            "label": "Percent"
          }
        },
        "annotations": {
          "horizontal": [
            {
              "label": "Critical (90%)",
              "value": 90,
              "fill": "above",
              "color": "#d62728"
            }
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 7,
      "width": 8,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AI-Gaming/GPU", "GPUTemperature", { "Tier": "gold", "stat": "Maximum" } ],
          [ "...", { "Tier": "silver", "stat": "Maximum" } ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "GPU Temperature (MAX)",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "Celsius"
          }
        },
        "annotations": {
          "horizontal": [
            {
              "label": "Warning (80Â°C)",
              "value": 80,
              "color": "#ff7f0e"
            },
            {
              "label": "Critical (85Â°C)",
              "value": 85,
              "fill": "above",
              "color": "#d62728"
            }
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 8,
      "y": 7,
      "width": 8,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AI-Gaming/GPU", "GPUPowerUsage", { "Tier": "gold", "stat": "Average" } ],
          [ "...", { "Tier": "silver", "stat": "Average" } ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "GPU Power Usage (AVG)",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "Watts"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 16,
      "y": 7,
      "width": 8,
      "height": 6,
      "properties": {
        "metrics": [
          [ { "expression": "SUM(SEARCH('{AI-Gaming/GPU,Tier} Tier=\"gold\" MetricName=\"Heartbeat\"', 'Sum', 60))", "label": "Gold Heartbeats/min", "id": "e1" } ],
          [ { "expression": "SUM(SEARCH('{AI-Gaming/GPU,Tier} Tier=\"silver\" MetricName=\"Heartbeat\"', 'Sum', 60))", "label": "Silver Heartbeats/min", "id": "e2" } ],
          [ "AWS/AutoScaling", "GroupInServiceInstances", { "AutoScalingGroupName": "AI-Gaming-Gold-Tier-ASG", "label": "Gold Expected", "color": "#2ca02c" } ],
          [ "...", { "AutoScalingGroupName": "AI-Gaming-Silver-Tier-ASG", "label": "Silver Expected", "color": "#17becf" } ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Heartbeat vs Expected Instance Count",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "Count"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 13,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ { "expression": "AVG(SEARCH('{AI-Gaming/GPU,Tier} Tier=\"gold\" MetricName=\"GPUUtilization\"', 'Average', 60))", "label": "AVG Utilization", "id": "e1" } ],
          [ { "expression": "MAX(SEARCH('{AI-Gaming/GPU,Tier} Tier=\"gold\" MetricName=\"GPUMemoryUtilization\"', 'Maximum', 60))", "label": "MAX Memory", "id": "e2" } ],
          [ { "expression": "MAX(SEARCH('{AI-Gaming/GPU,Tier} Tier=\"gold\" MetricName=\"GPUTemperature\"', 'Maximum', 60))", "label": "MAX Temperature", "id": "e3" } ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Gold Tier - Aggregated GPU Metrics",
        "period": 60,
        "yAxis": {
          "left": {
            "min": 0,
            "max": 100
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 13,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ { "expression": "AVG(SEARCH('{AI-Gaming/GPU,Tier} Tier=\"silver\" MetricName=\"GPUUtilization\"', 'Average', 60))", "label": "AVG Utilization", "id": "e1" } ],
          [ { "expression": "MAX(SEARCH('{AI-Gaming/GPU,Tier} Tier=\"silver\" MetricName=\"GPUMemoryUtilization\"', 'Maximum', 60))", "label": "MAX Memory", "id": "e2" } ],
          [ { "expression": "MAX(SEARCH('{AI-Gaming/GPU,Tier} Tier=\"silver\" MetricName=\"GPUTemperature\"', 'Maximum', 60))", "label": "MAX Temperature", "id": "e3" } ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Silver Tier - Aggregated GPU Metrics",
        "period": 60,
        "yAxis": {
          "left": {
            "min": 0,
            "max": 100
          }
        }
      }
    },
    {
      "type": "log",
      "x": 0,
      "y": 19,
      "width": 24,
      "height": 6,
      "properties": {
        "query": "fields @timestamp, @message\n| filter @message like /Xid|nvidia|GPU/i\n| filter @message like /error|fail|critical/i\n| sort @timestamp desc\n| limit 20",
        "region": "us-east-1",
        "title": "GPU Driver Errors (NVIDIA Xid, kernel errors)",
        "view": "table"
      }
    }
  ]
}

