# Workflow Integration Rule

## Overview
This rule configures Cursor AI to automatically discover, load, and execute predefined workflows from the global workflow registry. The AI can suggest, execute, and guide users through complex multi-step processes using standardized workflows.

## Workflow Registry Configuration

### Global Workflow Registry
- **Registry File**: `C:\Users\kento\.cursor\global-cursor-repo\workflows\workflow-registry.json`
- **Docs Path**: `C:\Users\kento\.cursor\global-cursor-repo\docs`
- **Auto-Load**: Enabled
- **Auto-Suggest**: Enabled
- **MCP Integration**: Enabled

### Available Workflows

#### Development Workflows
1. **build_out_prd** - Build Out PRD
   - **Description**: Reads a Product Requirements Document (PRD) and builds out the entire solution using best practices, Docker containers, and automated testing
   - **Tags**: prd, docker, fullstack, testing, deployment
   - **MCP Servers**: exa, filesystem, git
   - **Priority**: High

#### Testing Workflows
2. **create_update_and_run_tests** - Create, Update, and Run Tests
   - **Description**: Scans workspace and develops comprehensive testing strategies across all levels - unit, functional, system, and solution tests
   - **Tags**: testing, unit, functional, system, automation
   - **MCP Servers**: exa, filesystem, git
   - **Priority**: High

3. **visually_test_app_tests** - Visually Test App Tests
   - **Description**: Performs visual testing of applications using browser automation and screenshot comparison
   - **Tags**: visual, testing, browser, automation, screenshots
   - **MCP Servers**: exa, Playwright, filesystem
   - **Priority**: Medium

#### Deployment Workflows
4. **deploy_mobile_to_aws_linux_server** - Deploy Mobile App to AWS Linux Server
   - **Description**: Builds and deploys a local mobile application project to an existing AWS Linux Server with mobile app servers and database backend
   - **Tags**: mobile, aws, linux, deployment, expo
   - **MCP Servers**: exa, awslabs.ec2-mcp-server, awslabs.aws-api-mcp-server, filesystem
   - **Priority**: High

5. **deploy_mobile_to_aws_windows_server** - Deploy Mobile App to AWS Windows Server
   - **Description**: Builds and deploys a local mobile application project to an existing AWS Windows Server with mobile app servers and database backend
   - **Tags**: mobile, aws, windows, deployment, expo
   - **MCP Servers**: exa, awslabs.ec2-mcp-server, awslabs.aws-api-mcp-server, filesystem
   - **Priority**: High

6. **deploy_to_aws_linux_server** - Deploy to AWS Linux Server
   - **Description**: Deploys a web application to an existing AWS Linux Server with proper configuration and security
   - **Tags**: web, aws, linux, deployment, nginx
   - **MCP Servers**: exa, awslabs.ec2-mcp-server, awslabs.aws-api-mcp-server, filesystem
   - **Priority**: High

7. **deploy_to_aws_windows_server** - Deploy to AWS Windows Server
   - **Description**: Deploys a web application to an existing AWS Windows Server with proper configuration and security
   - **Tags**: web, aws, windows, deployment, iis
   - **MCP Servers**: exa, awslabs.ec2-mcp-server, awslabs.aws-api-mcp-server, filesystem
   - **Priority**: High

#### Infrastructure Workflows
8. **provision_aws_linux_server** - Provision AWS Linux Server
   - **Description**: Creates and configures a new AWS Linux server with proper security, networking, and development environment
   - **Tags**: aws, linux, provisioning, ec2, security
   - **MCP Servers**: exa, awslabs.ec2-mcp-server, awslabs.aws-api-mcp-server
   - **Priority**: High

9. **provision_aws_windows_server** - Provision AWS Windows Server
   - **Description**: Creates and configures a new AWS Windows server with proper security, networking, and development environment
   - **Tags**: aws, windows, provisioning, ec2, security
   - **MCP Servers**: exa, awslabs.ec2-mcp-server, awslabs.aws-api-mcp-server
   - **Priority**: High

## Workflow Usage Guidelines

### Automatic Workflow Detection
The AI should automatically detect when a user's request matches a predefined workflow and suggest it:

#### Example Triggers
- **"Build out this PRD"** → Suggest `build_out_prd` workflow
- **"Set up testing for this project"** → Suggest `create_update_and_run_tests` workflow
- **"Deploy this mobile app to AWS"** → Suggest `deploy_mobile_to_aws_linux_server` workflow
- **"Create a new AWS server"** → Suggest `provision_aws_linux_server` workflow
- **"Test this app visually"** → Suggest `visually_test_app_tests` workflow

### Workflow Execution Process
1. **Identify Workflow**: Match user request to available workflow
2. **Load Workflow**: Read the workflow document from docs folder
3. **Check Prerequisites**: Verify all prerequisites are met
4. **Execute Steps**: Follow workflow steps systematically
5. **Use MCP Servers**: Leverage appropriate MCP servers for each step
6. **Report Progress**: Provide clear progress updates
7. **Handle Errors**: Implement intelligent error handling and recovery

### Workflow Integration with MCP Servers
Each workflow is designed to work seamlessly with specific MCP servers:

#### Research Phase (Exa MCP)
- Use Exa MCP to research best practices
- Find authoritative sources and documentation
- Gather current industry standards

#### Infrastructure Operations (AWS MCP Servers)
- Use `awslabs.ec2-mcp-server` for EC2 operations
- Use `awslabs.aws-api-mcp-server` for AWS API calls
- Use `awslabs.ccapi-mcp-server` for Cloud Control API

#### File Operations (Filesystem MCP)
- Use filesystem MCP for file operations
- Manage project structure and configuration
- Handle file creation and modification

#### Browser Automation (Playwright MCP)
- Use Playwright MCP for visual testing
- Perform browser-based operations
- Capture screenshots and perform comparisons

#### Version Control (Git MCP)
- Use Git MCP for version control operations
- Manage commits and branches
- Handle repository operations

## Workflow Execution Rules

### 1. Automatic Workflow Suggestion
When a user makes a request that matches a workflow pattern:
- **Immediately suggest** the appropriate workflow
- **Explain** what the workflow will accomplish
- **Ask for confirmation** before proceeding
- **Show prerequisites** that need to be met

### 2. Workflow Execution
When executing a workflow:
- **Follow steps systematically** as defined in the workflow document
- **Use MCP servers** as specified for each step
- **Provide progress updates** at each major step
- **Handle errors gracefully** with recovery options
- **Validate results** before proceeding to next step

### 3. Workflow Customization
- **Adapt workflows** to specific project requirements
- **Skip steps** that are not applicable
- **Add steps** if additional requirements are identified
- **Modify parameters** based on project context

### 4. Workflow Documentation
- **Document execution** of workflow steps
- **Record any modifications** made to the workflow
- **Provide summary** of completed workflow
- **Suggest follow-up actions** if applicable

## Workflow Categories and Priorities

### High Priority Workflows
- **Development**: `build_out_prd`
- **Testing**: `create_update_and_run_tests`
- **Deployment**: All deployment workflows
- **Infrastructure**: All provisioning workflows

### Medium Priority Workflows
- **Testing**: `visually_test_app_tests`

### Workflow Categories
1. **Development** (Green) - Building and developing applications
2. **Testing** (Orange) - Testing applications at various levels
3. **Deployment** (Blue) - Deploying applications to various environments
4. **Infrastructure** (Purple) - Provisioning and managing infrastructure

## Error Handling and Recovery

### Common Error Scenarios
1. **Missing Prerequisites**: Guide user to install/setup required tools
2. **MCP Server Unavailable**: Suggest alternative approaches or wait for server
3. **Permission Issues**: Guide user to fix permissions or use alternative methods
4. **Network Issues**: Implement retry logic and suggest offline alternatives

### Recovery Strategies
1. **Retry Logic**: Automatically retry failed operations
2. **Alternative Approaches**: Suggest different methods to achieve same goal
3. **Manual Steps**: Provide manual instructions when automation fails
4. **Partial Completion**: Continue from where workflow left off

## Workflow Integration Benefits

### For Users
- **Standardized Processes**: Consistent, proven workflows
- **Reduced Complexity**: Complex tasks broken into manageable steps
- **Best Practices**: Industry-standard approaches built-in
- **Automation**: Reduced manual work through MCP integration

### For AI
- **Structured Execution**: Clear steps and decision points
- **MCP Integration**: Leverage powerful tools automatically
- **Error Handling**: Built-in recovery and fallback options
- **Documentation**: Clear documentation of each step

## Workflow Registry Maintenance

### Adding New Workflows
1. **Create workflow document** in docs folder
2. **Add workflow entry** to workflow-registry.json
3. **Define MCP server requirements**
4. **Set appropriate tags and categories**
5. **Test workflow execution**

### Updating Existing Workflows
1. **Modify workflow document** in docs folder
2. **Update workflow registry** if metadata changes
3. **Test updated workflow**
4. **Document changes**

### Workflow Validation
- **Prerequisites Check**: Verify all prerequisites are clearly defined
- **MCP Integration**: Ensure MCP servers are properly specified
- **Step Validation**: Verify all steps are executable
- **Error Handling**: Ensure proper error handling is included

---

**This rule ensures that Cursor AI can automatically discover, suggest, and execute predefined workflows, providing users with powerful, standardized processes for complex development tasks while leveraging the full power of MCP servers.**