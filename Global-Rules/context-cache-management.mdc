# Context and Cache Management
**Essential strategies for maintaining AI coding session efficiency**

## üéØ The Problem

As AI coding sessions progress, context windows fill with:
- Resolved error details
- Completed task specifics
- Temporary working notes
- Stale file contents
- Old conversation threads

This leads to:
- Slower response times
- Less relevant suggestions
- Context overflow errors
- Missed important information
- Degraded performance

## üßπ The Solution: Regular Cleanup

**Principle:** Clear what's done, keep what's needed, optimize for current work.

## üìã What to Clear vs. What to Keep

### ‚úÖ ALWAYS KEEP:
- **Current Task Context**
  - What you're currently working on
  - Current file you're editing
  - Current problem you're solving
  
- **Critical Decisions**
  - Architecture choices
  - Technology selections
  - Important patterns established
  
- **Active Issues**
  - Current bugs being fixed
  - Open questions
  - Blockers needing resolution
  
- **Project Structure**
  - Key file locations
  - Directory organization
  - Important configuration paths
  
- **Reference Files**
  - Manager files (for milestone tracking)
  - Log files (for crash recovery)
  - Progress trackers

### ‚ùå CLEAR REGULARLY:
- **Resolved Errors**
  - Error details once fixed
  - Stack traces after resolution
  - Failed attempts that didn't work
  
- **Completed Tasks**
  - Detailed implementation steps
  - Intermediate code versions
  - Working notes for finished features
  
- **Temporary Data**
  - Test outputs
  - Debug logs
  - Scratch work
  
- **Stale File Contents**
  - Old versions of files
  - Files no longer being edited
  - Outdated snapshots
  
- **Redundant Information**
  - Repeated explanations
  - Multiple versions of same info
  - Obsolete instructions

## üîÑ When to Clean Up

### Automatic Triggers:
1. **Between Milestones** (if using hourly milestone system)
   - After completing each hour
   - Before starting next milestone
   
2. **After Major Features**
   - Feature fully implemented
   - Feature tested and working
   
3. **After Fixing Complex Bugs**
   - Bug identified and fixed
   - Solution verified working
   
4. **When Context Feels "Heavy"**
   - Responses slowing down
   - Less relevant suggestions
   - Feeling like repeating yourself

### Manual Triggers:
- User explicitly requests cleanup
- Starting a new major phase
- Switching to different area of codebase
- After generating large reports

## üìù Cleanup Checklist

```markdown
### Phase 1: Identify
- [ ] List completed tasks
- [ ] List resolved errors
- [ ] List files no longer actively editing
- [ ] List temporary data to remove

### Phase 2: Preserve
- [ ] Document critical decisions
- [ ] Update manager file (if using milestones)
- [ ] Save important findings
- [ ] Note current progress

### Phase 3: Clear
- [ ] Remove resolved error details
- [ ] Clear completed task specifics
- [ ] Remove old file versions
- [ ] Clear working notes
- [ ] Remove redundant info

### Phase 4: Optimize
- [ ] Summarize what remains
- [ ] Organize current context
- [ ] Set focus for next phase
- [ ] Verify critical info retained

### Phase 5: Verify
- [ ] Can resume work immediately?
- [ ] Critical decisions still accessible?
- [ ] Progress tracking intact?
- [ ] Current task clear?
```

## üéØ Cleanup Techniques

### Technique 1: Milestone-Based Cleanup
**Best for:** Long-running tasks with milestones

```markdown
At end of each milestone:

1. Save to Manager File:
   - Milestone completed
   - Key decisions made
   - Issues encountered & resolved
   
2. Clear from Context:
   - Detailed implementation steps
   - Resolved error traces
   - Working notes for milestone
   
3. Retain in Context:
   - Manager file reference
   - Overall task goal
   - Next milestone preview
```

### Technique 2: Feature-Based Cleanup
**Best for:** Feature development

```markdown
After feature complete:

1. Document:
   - Feature functionality
   - Key files modified
   - Important patterns used
   
2. Clear:
   - Implementation details
   - Debugging steps
   - Intermediate versions
   
3. Keep:
   - Feature location
   - Critical design choices
   - Testing notes (if relevant)
```

### Technique 3: Problem-Solving Cleanup
**Best for:** Bug fixes and troubleshooting

```markdown
After bug fixed:

1. Document:
   - Root cause identified
   - Solution implemented
   - Files modified
   
2. Clear:
   - Failed attempts
   - Error stack traces
   - Debug logs
   
3. Keep:
   - Pattern learned (if applicable)
   - Prevention strategy
   - Test case added
```

### Technique 4: Phase-Based Cleanup
**Best for:** Multi-phase projects

```markdown
Between phases:

1. Document:
   - Phase completed
   - Key deliverables
   - Learnings
   
2. Clear:
   - All phase-specific details
   - Temporary working data
   - Stale file contents
   
3. Keep:
   - Phase outcomes
   - Next phase context
   - Critical dependencies
```

## üìö Best Practices

### DO:
‚úÖ Clean up regularly (don't wait for problems)
‚úÖ Document before clearing
‚úÖ Keep references to manager/log files
‚úÖ Summarize key learnings
‚úÖ Clear completed work progressively
‚úÖ Maintain clear current focus
‚úÖ Use milestone system for structure
‚úÖ Balance detail with clarity

### DON'T:
‚ùå Clear everything at once
‚ùå Remove critical decisions
‚ùå Delete current work context
‚ùå Clear without documenting first
‚ùå Keep every detail "just in case"
‚ùå Mix current and completed context
‚ùå Ignore cleanup until forced
‚ùå Clear progress tracking

## üîß Integration with Other Systems

### With Hourly Milestones:
```markdown
Milestone System handles cleanup automatically:
- After each milestone: Automatic cleanup
- Manager file: Persistent storage
- Log file: Continuous tracking
- Context: Optimized for current milestone
```

### With Manual Work:
```markdown
Request cleanup explicitly:
- "Clear resolved errors from context"
- "Clean up and focus on X"
- "Summarize progress and start fresh"
- "Remove temporary data and optimize context"
```

### With Session Breaks:
```markdown
Before break/logout:
- Document current state
- Clear working notes
- Save critical context to file
- Set up easy resume point

After return:
- Review saved context
- Restore critical info only
- Start with clean slate
- Resume from saved point
```

## üéì Example Cleanup Script

```markdown
# Context Cleanup Request Template

"Please perform context cleanup:

1. Keep:
   - Current task: [Task description]
   - Files being edited: [File names]
   - Critical decisions: [Any important choices]
   
2. Clear:
   - Resolved errors from [Feature X]
   - Completed tasks: [List tasks]
   - Temporary debug data
   - Old file versions
   
3. Focus:
   - Next task: [What's next]
   - Current priority: [Priority]
   - Active files: [Files to work on]
   
4. Document:
   - Save progress to: [Manager file or progress log]
   - Update status: [Current status]"
```

## üìä Cleanup Metrics

### Signs You Need Cleanup:
- Responses taking longer
- Less relevant suggestions
- Repeating same information
- Context overflow warnings
- Difficulty finding recent info
- Feeling "lost" in conversation

### Signs Cleanup is Working:
- Faster responses
- More relevant suggestions
- Clear focus on current work
- Easy to reference critical info
- Smooth progression
- Efficient problem-solving

## üö® Emergency Cleanup

### When Context is Critically Full:

```markdown
1. SAVE IMMEDIATELY:
   - Current file being edited
   - Current line/section
   - Immediate next step
   
2. CLEAR AGGRESSIVELY:
   - All completed work details
   - All resolved errors
   - All old file versions
   - All working notes
   
3. RESTORE MINIMAL:
   - Current task only
   - Current file only
   - Next immediate step
   
4. CONTINUE:
   - Resume from saved point
   - Build context incrementally
   - Clean regularly going forward
```

## üéØ Context Optimization Strategy

### For Long Sessions:
```markdown
Hour 1-2: Work normally
Hour 3: First cleanup (clear resolved errors)
Hour 4-5: Work normally
Hour 6: Major cleanup (clear completed features)
Hour 7+: Work with clean slate + essential context
```

### For Short Sessions:
```markdown
Focus: Keep context minimal from start
Strategy: Only load what's needed for current task
Cleanup: After each task completion
```

### For Complex Projects:
```markdown
Structure: Use milestone system
Cleanup: Automatic between milestones
Storage: Manager file + progress log
Focus: One milestone context at a time
```

## üìù Cleanup Templates

### Minimal Cleanup Request:
```
"Clear resolved errors and focus on [current task]"
```

### Standard Cleanup Request:
```
"Cleanup context: Keep [essential info], clear [completed work], focus on [next task]"
```

### Full Cleanup Request:
```
"Comprehensive cleanup: Document [critical info] to [file], clear all completed work, optimize for [next phase]"
```

## üé¨ Cleanup Workflow Example

```markdown
### Before Cleanup:
- Context: 800K tokens
- Content: 3 completed features, 5 resolved errors, working on feature 4
- Performance: Slowing down
- Focus: Unclear

### Cleanup Process:
1. Document to Manager file:
   - Features 1-3 complete
   - 5 errors resolved
   - Currently on Feature 4, step 2
   
2. Clear from context:
   - Feature 1-3 implementation details
   - All 5 error traces
   - Temporary debug data
   
3. Keep in context:
   - Manager file reference
   - Feature 4 current progress
   - Architecture decisions
   
### After Cleanup:
- Context: 250K tokens
- Content: Feature 4 focus, critical decisions
- Performance: Fast responses
- Focus: Crystal clear
```

---

**REMEMBER:** A clean context is a productive context. Clean regularly, document first, keep what matters, clear the rest.
