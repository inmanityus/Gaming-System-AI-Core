# Gaming System AI Core - Cursor Rules

## Global Repository Linked
Global knowledge and scripts accessed via Windows junctions:
- `Global-Reasoning/` → C:\Users\kento\.cursor\global-cursor-repo\reasoning\
- `Global-History/` → C:\Users\kento\.cursor\global-cursor-repo\history\
- `Global-Scripts/` → C:\Users\kento\.cursor\global-cursor-repo\scripts\
- `Global-Workflows/` → C:\Users\kento\.cursor\global-cursor-repo\rules\

**Shared Across ALL Projects**: Updates in global repo appear everywhere instantly

## This Project

**Type**: Deep Learning System (AI/ML focused)
**Stack**: Next.js 15, React 19, TypeScript, ESLint, AI/ML Integration
**Purpose**: AI-powered gaming system core with deep learning capabilities

### Ports
- Frontend: 3000 (Next.js dev server)
- Database: 5443 (PostgreSQL Docker container)

### Start Services
```bash
# Install dependencies
npm install

# Start development server (Next.js will use port 3000)
npm run dev

# Start PostgreSQL database (if needed for future features)
docker-compose up -d
```

### Stop Services (MCP-Safe)
```bash
# Stop application servers only (protects MCP servers)
.\scripts\safe-kill-servers.ps1

# Stop PostgreSQL container
docker-compose down
```

## MCP Protection
**CRITICAL**: Use safe-kill scripts. NEVER: `Get-Process node | Stop-Process`

## Tool Verification (MANDATORY)
**CRITICAL**: ALWAYS verify tool locations before execution. NEVER run executables without verification.

**Use verified paths**:
```powershell
# After startup, use global variable
& $global:ToolPaths.Python script.py
& $global:ToolPaths.Node app.js

# Or use helper function
$pythonPath = & "Global-Scripts\verify-tool.ps1" -Tool Python -RequireOrExit
& $pythonPath script.py
```

**Why**: Prevents session crashes from missing/incorrectly pathed tools (Python, Node, Docker, etc.)

**Python Special Case**: Use `C:\Users\kento\AppData\Local\Programs\Python\Python313\python.exe` (NOT Windows App Alias)

**See**: `Global-Rules/TOOL-VERIFICATION-MANDATORY.md` for full details

## Automated Systems
- 45-minute milestones auto-activate for tasks > 1 hour
- Resource management monitors session health (enables 12+ hour sessions)
- End-user testing with Playwright for web projects
- Context management between features
- Global reasoning/history from shared repository

## Managing Global Repository
To recreate junctions (if broken):
```powershell
powershell -NoProfile -ExecutionPolicy Bypass -File "scripts\Setup-Global-Junctions.ps1" -Force
```

To update global content (affects ALL projects):
```powershell
# Edit through any project's junction - changes appear everywhere
code "Global-Scripts\monitor-resources.ps1"
```

## Memory Management
- Active context limited to 50 lines max
- Run `resource-cleanup.ps1` after every 45-minute milestone
- Use `.cursor/memory/` for session optimization
- Extract facts from logs before deletion (80-90% space savings)

## Development Workflow
1. Always use Command Watchdog Protocol for commands > 5 seconds
2. Follow TDD principles with comprehensive testing
3. Use peer-based coding for new functionality
4. Implement security measures from the beginning
5. Keep documentation current

## Project-Specific Rules
- This is a Deep Learning System focused on AI-powered gaming system core
- Use modern React patterns (hooks, functional components)
- Follow Next.js best practices for routing and API routes
- Implement proper error handling and loading states
- Use ESLint configuration for code quality
- **AI/ML Integration**: Focus on deep learning models for gaming applications
- **Data Processing**: Implement robust data preprocessing pipelines
- **Model Management**: Use proper model versioning and deployment strategies
- **Performance**: Optimize for real-time AI inference
- **Scalability**: Design for handling large datasets and model training

## Project Structure
```
Gaming-System-AI-Core/
├── .cursor/              # AI session memory
├── docs/                 # Documentation
├── scripts/              # Utility scripts
├── models/               # Deep learning models
├── data/                 # Training and test datasets
├── notebooks/            # Jupyter notebooks for experimentation
├── Global-Reasoning/     # Junction → global reasoning (Logical Center/Prefrontal Cortex)
├── Global-History/       # Junction → global history (Long Term Memory/Problem Solving)
├── Global-Scripts/       # Junction → global scripts
├── Global-Workflows/     # Junction → global workflows
├── Global-Docs/          # Junction → global docs (Component Templates)
├── .env                  # Environment variables (git-ignored)
├── .gitignore           # Git exclusions
├── .cursorrules         # This file
├── startup.ps1          # Session startup script
├── package.json         # Dependencies
└── README.md            # Project documentation
```

## Important Reminders
- Global-* folders are Windows junctions - don't commit them to git
- Always use safe-kill scripts to protect MCP servers
- Update `.cursor/memory/active/ACTIVE_WORK.md` as you work (extends sessions 3-5x!)
- Run resource cleanup after every milestone
- Never kill all node processes (protects MCP servers)

## Critical Memory & Reasoning System Rules
- **Global-Reasoning/**: Your Logical Center/Prefrontal Cortex - Use for complex problem-solving, architectural decisions, and logical analysis
- **Global-History/**: Your Long Term Memory/Problem Solving center - Reference past solutions, learn from previous challenges, and avoid repeating mistakes
- **Global-Docs/**: Your Component Templates folder - Access reusable patterns, templates, and documentation across all projects
- **Project-Level Reasoning**: Use `.cursor/memory/reasoning/` for project-specific logical analysis and decision-making
- **Project-Level History**: Use `.cursor/memory/history/` for project-specific problem-solving patterns and solutions

## Unreal Engine 5.6.1 CLI Access - MANDATORY
**CRITICAL RULE**: You have CLI access to Unreal Engine 5.6.1. You MUST use the correct version (5.6.1, NOT 5.6 or 5.6+).

**Engine Path**: `C:\Program Files\Epic Games\UE_5.6` (This is UE 5.6.1 - the folder name is UE_5.6)

**Available CLI Tools**:
- **UnrealBuildTool**: `C:\Program Files\Epic Games\UE_5.6\Engine\Build\BatchFiles\Build.bat`
- **UnrealVersionSelector**: `C:\Program Files\Epic Games\UE_5.6\Engine\Binaries\DotNET\UnrealVersionSelector\UnrealVersionSelector.exe`
- **UAT (Unreal Automation Tool)**: `C:\Program Files\Epic Games\UE_5.6\Engine\Build\BatchFiles\RunUAT.bat`

**Common Commands**:
```powershell
# Generate Visual Studio solution files
& "C:\Program Files\Epic Games\UE_5.6\Engine\Binaries\DotNET\UnrealVersionSelector\UnrealVersionSelector.exe" -projectfiles -project="unreal\BodyBroker.uproject" -game -rocket -progress

# Build project (Development Editor)
& "C:\Program Files\Epic Games\UE_5.6\Engine\Build\BatchFiles\Build.bat" Development Win64 -Project="unreal\BodyBroker.uproject" -TargetType=Editor -Progress -NoEngineChanges

# Build project (Shipping)
& "C:\Program Files\Epic Games\UE_5.6\Engine\Build\BatchFiles\Build.bat" Shipping Win64 -Project="unreal\BodyBroker.uproject" -TargetType=Game -Progress -NoEngineChanges
```

**Helper Scripts**:
- `scripts/build-ue5-project.ps1` - Build UE5 project (uses 5.6.1)
- `scripts/generate-vs-files.ps1` - Generate Visual Studio solution files
- `scripts/automated-ue5-build.ps1` - Full automated build pipeline

**ENFORCEMENT**:
- ALWAYS use UE 5.6.1 (exact version) - NEVER use 5.6 or 5.6+
- ALWAYS verify engine path before running commands
- Use helper scripts when available (they handle version correctly)
- For compilation testing, use CLI tools instead of requiring UE5 Editor GUI

**Version Verification**:
```powershell
# Check installed UE5 versions
Get-ChildItem "C:\Program Files\Epic Games\" -Directory -Filter "UE_*" | Select-Object Name

# Verify 5.6.1 exists (folder name is UE_5.6, but version is 5.6.1)
Test-Path "C:\Program Files\Epic Games\UE_5.6"
```

## AWS Deployment Workflow - MANDATORY
**CRITICAL RULE**: All AI models must run in AWS, not locally. Local dev computer cannot handle model inference.

**Workflow** (MUST be followed for ALL deployments):
1. **Build Everything Locally** - Compile all code (Python, UE5 5.6.1, etc.)
2. **Test Everything Locally** - Run ALL tests, ensure 100% pass rate
3. **Verify Dev System** - Ensure dev system integrity before deploying
4. **Deploy to AWS** - Deploy services, infrastructure, configuration
5. **Test in AWS** - Run ALL tests against AWS services
6. **Shutdown Local Models** - Stop all local AI model services (Ollama, etc.)
7. **Fix Issues Immediately** - Use `/all-rules` and `/test-comprehensive` for all fixes

**Scripts**:
- `scripts/aws-deploy-full.ps1` - Full deployment workflow
- `scripts/aws-deploy-services.ps1` - Deploy services to AWS
- `scripts/aws-test-services.ps1` - Test services in AWS
- `scripts/shutdown-local-models.ps1` - Stop local models

**ENFORCEMENT**: 
- NEVER skip local testing before AWS deployment
- NEVER skip AWS testing after deployment
- ALWAYS shutdown local models after AWS is ready
- ALWAYS fix issues using `/all-rules` and `/test-comprehensive`

**Reference**: See `Global-Workflows/aws-deployment-workflow.md` for full details
